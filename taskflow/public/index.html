<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>TaskFlow — Kanban Board</title>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/react/18.2.0/umd/react.production.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/react-dom/18.2.0/umd/react-dom.production.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/babel-standalone/7.23.9/babel.min.js"></script>
  <style>
    /* Agent 1: Dark theme design system */
    *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }
    :root {
      --bg: #0f1117; --surface: #1a1d27; --surface-hover: #242836;
      --border: #2e3347; --text: #e2e8f0; --text-muted: #8892a8;
      --accent: #6366f1; --accent-hover: #818cf8;
      --danger: #ef4444; --danger-hover: #f87171;
      --success: #10b981; --warning: #f59e0b; --info: #3b82f6;
      --radius: 8px; --shadow: 0 4px 12px rgba(0,0,0,0.3);
      --font: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
    }
    body { font-family: var(--font); background: var(--bg); color: var(--text); min-height: 100vh; }
    input, textarea, select, button { font-family: inherit; font-size: inherit; }
    input, textarea, select {
      background: var(--bg); color: var(--text); border: 1px solid var(--border);
      border-radius: var(--radius); padding: 8px 12px; outline: none; width: 100%;
    }
    input:focus, textarea:focus, select:focus { border-color: var(--accent); }
    button {
      cursor: pointer; border: none; border-radius: var(--radius);
      padding: 8px 16px; font-weight: 500; transition: all 0.15s;
    }
    .btn-primary { background: var(--accent); color: white; }
    .btn-primary:hover { background: var(--accent-hover); }
    .btn-danger { background: var(--danger); color: white; }
    .btn-danger:hover { background: var(--danger-hover); }
    .btn-ghost { background: transparent; color: var(--text-muted); }
    .btn-ghost:hover { background: var(--surface-hover); color: var(--text); }
    .btn-sm { padding: 4px 10px; font-size: 0.85rem; }

    /* Layout */
    .app { display: flex; flex-direction: column; height: 100vh; }
    .header {
      display: flex; align-items: center; justify-content: space-between;
      padding: 12px 24px; background: var(--surface); border-bottom: 1px solid var(--border);
    }
    .header h1 { font-size: 1.3rem; font-weight: 700; }
    .header h1 span { color: var(--accent); }
    .header-actions { display: flex; gap: 12px; align-items: center; }

    /* Auth forms */
    .auth-page {
      display: flex; align-items: center; justify-content: center;
      flex: 1; padding: 24px;
    }
    .auth-card {
      background: var(--surface); border: 1px solid var(--border);
      border-radius: 12px; padding: 32px; width: 100%; max-width: 400px;
    }
    .auth-card h2 { margin-bottom: 24px; text-align: center; }
    .form-group { margin-bottom: 16px; }
    .form-group label { display: block; margin-bottom: 4px; font-size: 0.9rem; color: var(--text-muted); }
    .auth-card .btn-primary { width: 100%; padding: 10px; margin-top: 8px; }
    .auth-toggle { text-align: center; margin-top: 16px; color: var(--text-muted); font-size: 0.9rem; }
    .auth-toggle a { color: var(--accent); cursor: pointer; text-decoration: none; }
    .error-msg { color: var(--danger); font-size: 0.85rem; margin-top: 8px; text-align: center; }

    /* Board selector */
    .board-bar {
      display: flex; align-items: center; gap: 12px; padding: 12px 24px;
      background: var(--surface); border-bottom: 1px solid var(--border); flex-wrap: wrap;
    }
    .board-tab {
      padding: 6px 16px; border-radius: 20px; font-size: 0.9rem;
      background: var(--bg); border: 1px solid var(--border); color: var(--text-muted); cursor: pointer;
    }
    .board-tab.active { background: var(--accent); color: white; border-color: var(--accent); }
    .board-tab:hover:not(.active) { border-color: var(--accent); color: var(--text); }
    .board-tab .delete-board {
      margin-left: 6px; opacity: 0; font-size: 0.8rem; transition: opacity 0.15s;
    }
    .board-tab:hover .delete-board { opacity: 0.7; }

    /* Kanban board — Agent 1 layout */
    .board { display: flex; flex: 1; overflow-x: auto; padding: 20px; gap: 16px; }
    .column {
      min-width: 300px; max-width: 340px; flex-shrink: 0;
      background: var(--surface); border-radius: 12px; display: flex; flex-direction: column;
      border: 1px solid var(--border); max-height: calc(100vh - 160px);
    }
    .column-header {
      display: flex; align-items: center; justify-content: space-between;
      padding: 14px 16px; border-bottom: 1px solid var(--border);
    }
    .column-title { display: flex; align-items: center; gap: 8px; font-weight: 600; }
    .column-dot { width: 10px; height: 10px; border-radius: 50%; }
    .column-count {
      background: var(--bg); padding: 1px 8px; border-radius: 10px;
      font-size: 0.8rem; color: var(--text-muted); margin-left: 4px;
    }
    .column-body { flex: 1; overflow-y: auto; padding: 12px; display: flex; flex-direction: column; gap: 10px; }
    .column-body.drag-over { background: rgba(99, 102, 241, 0.05); }

    /* Task card — Agent 1 design */
    .task-card {
      background: var(--bg); border: 1px solid var(--border); border-radius: var(--radius);
      padding: 14px; cursor: grab; transition: all 0.15s; position: relative;
    }
    .task-card:hover { border-color: var(--accent); transform: translateY(-1px); box-shadow: var(--shadow); }
    .task-card.dragging { opacity: 0.4; transform: rotate(2deg); }
    .task-card-title { font-weight: 500; margin-bottom: 4px; padding-right: 24px; }
    .task-card-desc { font-size: 0.85rem; color: var(--text-muted); margin-bottom: 8px; }
    .task-card-meta { display: flex; gap: 6px; flex-wrap: wrap; align-items: center; }
    .priority-badge {
      font-size: 0.75rem; padding: 2px 8px; border-radius: 10px; font-weight: 500;
    }
    .priority-none { background: #374151; color: #9ca3af; }
    .priority-low { background: #1e3a5f; color: #60a5fa; }
    .priority-medium { background: #4a3728; color: #fbbf24; }
    .priority-high { background: #5b2124; color: #f87171; }
    .priority-urgent { background: #7f1d1d; color: #fca5a5; }
    .due-badge { font-size: 0.75rem; color: var(--text-muted); }
    .due-badge.overdue { color: var(--danger); }
    .task-delete {
      position: absolute; top: 10px; right: 10px; background: none; border: none;
      color: var(--text-muted); cursor: pointer; font-size: 1rem; padding: 2px 6px;
      border-radius: 4px; opacity: 0; transition: opacity 0.15s;
    }
    .task-card:hover .task-delete { opacity: 0.6; }
    .task-delete:hover { opacity: 1; color: var(--danger); background: rgba(239,68,68,0.1); }

    /* Add task form */
    .add-task-form { padding: 12px; border-top: 1px solid var(--border); }
    .add-task-form input { margin-bottom: 8px; }
    .add-task-form .form-row { display: flex; gap: 8px; }
    .add-task-form select { flex: 1; }

    /* Modal overlay */
    .modal-overlay {
      position: fixed; inset: 0; background: rgba(0,0,0,0.6);
      display: flex; align-items: center; justify-content: center; z-index: 100;
    }
    .modal {
      background: var(--surface); border: 1px solid var(--border);
      border-radius: 12px; padding: 28px; width: 100%; max-width: 480px;
    }
    .modal h3 { margin-bottom: 20px; }
    .modal .form-group { margin-bottom: 14px; }
    .modal-actions { display: flex; gap: 10px; justify-content: flex-end; margin-top: 20px; }

    /* Stats bar */
    .stats-bar {
      display: flex; gap: 20px; padding: 0 24px 0 0; font-size: 0.85rem; color: var(--text-muted);
    }
    .stat-item span { color: var(--text); font-weight: 600; }

    /* Empty state */
    .empty-state {
      flex: 1; display: flex; flex-direction: column; align-items: center;
      justify-content: center; gap: 16px; color: var(--text-muted);
    }
    .empty-state p { font-size: 1.1rem; }

    /* Scrollbar */
    ::-webkit-scrollbar { width: 6px; height: 6px; }
    ::-webkit-scrollbar-track { background: transparent; }
    ::-webkit-scrollbar-thumb { background: var(--border); border-radius: 3px; }
  </style>
</head>
<body>
  <div id="root"></div>
  <script type="text/babel">
    const { useState, useEffect, useCallback, useRef, createContext, useContext } = React;

    // ─── API Client (Agent 7 pattern) ─────────────────────────────────────
    const api = {
      token: localStorage.getItem('taskflow_token'),
      setToken(t) { this.token = t; if (t) localStorage.setItem('taskflow_token', t); else localStorage.removeItem('taskflow_token'); },
      async fetch(path, opts = {}) {
        const headers = { 'Content-Type': 'application/json', ...(opts.headers || {}) };
        if (this.token) headers['Authorization'] = `Bearer ${this.token}`;
        const res = await fetch(path, { ...opts, headers });
        if (res.status === 204) return null;
        const data = await res.json();
        if (!res.ok) throw new Error(data.error || 'Request failed');
        return data;
      },
      get: (p) => api.fetch(p),
      post: (p, b) => api.fetch(p, { method: 'POST', body: JSON.stringify(b) }),
      put: (p, b) => api.fetch(p, { method: 'PUT', body: JSON.stringify(b) }),
      patch: (p, b) => api.fetch(p, { method: 'PATCH', body: JSON.stringify(b) }),
      del: (p) => api.fetch(p, { method: 'DELETE' }),
    };

    // ─── Auth Context (Agent 7) ───────────────────────────────────────────
    const AuthContext = createContext(null);

    function AuthProvider({ children }) {
      const [user, setUser] = useState(null);
      const [loading, setLoading] = useState(true);

      useEffect(() => {
        if (api.token) {
          api.get('/api/auth/me').then(d => setUser(d.user)).catch(() => api.setToken(null)).finally(() => setLoading(false));
        } else {
          setLoading(false);
        }
      }, []);

      const login = async (email, password) => {
        const d = await api.post('/api/auth/login', { email, password });
        api.setToken(d.token); setUser(d.user); return d;
      };
      const register = async (username, email, password) => {
        const d = await api.post('/api/auth/register', { username, email, password });
        api.setToken(d.token); setUser(d.user); return d;
      };
      const logout = () => { api.setToken(null); setUser(null); };

      if (loading) return React.createElement('div', {style:{display:'flex',alignItems:'center',justifyContent:'center',height:'100vh',color:'var(--text-muted)'}}, 'Loading...');
      return React.createElement(AuthContext.Provider, { value: { user, login, register, logout } }, children);
    }

    // ─── Auth Form ────────────────────────────────────────────────────────
    function AuthPage() {
      const { login, register } = useContext(AuthContext);
      const [isLogin, setIsLogin] = useState(true);
      const [form, setForm] = useState({ username: '', email: '', password: '' });
      const [error, setError] = useState('');
      const [busy, setBusy] = useState(false);

      const handleSubmit = async (e) => {
        e.preventDefault(); setError(''); setBusy(true);
        try {
          if (isLogin) await login(form.email, form.password);
          else await register(form.username, form.email, form.password);
        } catch (err) { setError(err.message); }
        setBusy(false);
      };

      return (
        <div className="auth-page">
          <form className="auth-card" onSubmit={handleSubmit}>
            <h2>{isLogin ? 'Sign In' : 'Create Account'}</h2>
            {!isLogin && (
              <div className="form-group">
                <label>Username</label>
                <input value={form.username} onChange={e => setForm({...form, username: e.target.value})} required />
              </div>
            )}
            <div className="form-group">
              <label>Email</label>
              <input type="email" value={form.email} onChange={e => setForm({...form, email: e.target.value})} required />
            </div>
            <div className="form-group">
              <label>Password</label>
              <input type="password" value={form.password} onChange={e => setForm({...form, password: e.target.value})} required minLength={6} />
            </div>
            {error && <div className="error-msg">{error}</div>}
            <button type="submit" className="btn-primary" disabled={busy}>{busy ? '...' : (isLogin ? 'Sign In' : 'Sign Up')}</button>
            <div className="auth-toggle">
              {isLogin ? <>No account? <a onClick={() => { setIsLogin(false); setError(''); }}>Sign up</a></> : <>Have an account? <a onClick={() => { setIsLogin(true); setError(''); }}>Sign in</a></>}
            </div>
          </form>
        </div>
      );
    }

    // ─── WebSocket hook (Agent 8) ─────────────────────────────────────────
    function useWebSocket(onMessage) {
      const wsRef = useRef(null);
      const cbRef = useRef(onMessage);
      cbRef.current = onMessage;

      useEffect(() => {
        if (!api.token) return;
        const proto = location.protocol === 'https:' ? 'wss:' : 'ws:';
        const ws = new WebSocket(`${proto}//${location.host}?token=${api.token}`);
        wsRef.current = ws;
        ws.onmessage = (e) => { try { cbRef.current(JSON.parse(e.data)); } catch {} };
        ws.onclose = () => { setTimeout(() => { /* could auto-reconnect */ }, 3000); };
        const ping = setInterval(() => { if (ws.readyState === 1) ws.send(JSON.stringify({type:'ping'})); }, 30000);
        return () => { clearInterval(ping); ws.close(); };
      }, [api.token]);
    }

    // ─── Task Card (Agent 1 design) ───────────────────────────────────────
    function TaskCard({ task, boardId, onDelete, onUpdate }) {
      const [dragging, setDragging] = useState(false);

      const isOverdue = task.dueDate && new Date(task.dueDate) < new Date();
      const priorityClass = `priority-badge priority-${task.priority || 'none'}`;

      return (
        <div
          className={`task-card${dragging ? ' dragging' : ''}`}
          draggable
          onDragStart={(e) => {
            e.dataTransfer.setData('text/plain', JSON.stringify({ taskId: task.id, fromColumnId: task.columnId }));
            e.dataTransfer.effectAllowed = 'move';
            setDragging(true);
          }}
          onDragEnd={() => setDragging(false)}
        >
          <div className="task-card-title">{task.title}</div>
          {task.description && <div className="task-card-desc">{task.description}</div>}
          <div className="task-card-meta">
            {task.priority && task.priority !== 'none' && <span className={priorityClass}>{task.priority}</span>}
            {task.dueDate && <span className={`due-badge${isOverdue ? ' overdue' : ''}`}>{new Date(task.dueDate).toLocaleDateString()}</span>}
          </div>
          <button className="task-delete" onClick={() => onDelete(task.id)} title="Delete task">&times;</button>
        </div>
      );
    }

    // ─── Column (Agent 1 layout + Agent 2 repo move) ─────────────────────
    function Column({ column, tasks, boardId, onTaskCreated, onTaskMoved, onTaskDeleted }) {
      const [dragOver, setDragOver] = useState(false);
      const [showForm, setShowForm] = useState(false);
      const [title, setTitle] = useState('');
      const [desc, setDesc] = useState('');
      const [priority, setPriority] = useState('none');

      const handleDrop = (e) => {
        e.preventDefault(); setDragOver(false);
        try {
          const { taskId, fromColumnId } = JSON.parse(e.dataTransfer.getData('text/plain'));
          if (fromColumnId !== column.id) onTaskMoved(taskId, column.id);
        } catch {}
      };

      const handleAddTask = async (e) => {
        e.preventDefault();
        if (!title.trim()) return;
        try {
          const task = await api.post(`/api/boards/${boardId}/tasks`, { title: title.trim(), description: desc, columnId: column.id, priority });
          onTaskCreated(task);
          setTitle(''); setDesc(''); setPriority('none'); setShowForm(false);
        } catch (err) { alert(err.message); }
      };

      return (
        <div className="column">
          <div className="column-header">
            <div className="column-title">
              <span className="column-dot" style={{ background: column.color || '#6366f1' }}></span>
              {column.name}
              <span className="column-count">{tasks.length}</span>
            </div>
            <button className="btn-ghost btn-sm" onClick={() => setShowForm(!showForm)}>+</button>
          </div>
          <div
            className={`column-body${dragOver ? ' drag-over' : ''}`}
            onDragOver={(e) => { e.preventDefault(); setDragOver(true); }}
            onDragLeave={() => setDragOver(false)}
            onDrop={handleDrop}
          >
            {tasks.map(t => (
              <TaskCard key={t.id} task={t} boardId={boardId} onDelete={onTaskDeleted} />
            ))}
            {tasks.length === 0 && !showForm && <div style={{textAlign:'center',color:'var(--text-muted)',padding:'20px 0',fontSize:'0.85rem'}}>Drop tasks here</div>}
          </div>
          {showForm && (
            <form className="add-task-form" onSubmit={handleAddTask}>
              <input placeholder="Task title..." value={title} onChange={e => setTitle(e.target.value)} autoFocus />
              <input placeholder="Description (optional)" value={desc} onChange={e => setDesc(e.target.value)} />
              <div className="form-row">
                <select value={priority} onChange={e => setPriority(e.target.value)}>
                  <option value="none">No priority</option>
                  <option value="low">Low</option>
                  <option value="medium">Medium</option>
                  <option value="high">High</option>
                  <option value="urgent">Urgent</option>
                </select>
                <button type="submit" className="btn-primary btn-sm">Add</button>
                <button type="button" className="btn-ghost btn-sm" onClick={() => setShowForm(false)}>Cancel</button>
              </div>
            </form>
          )}
        </div>
      );
    }

    // ─── Board View ───────────────────────────────────────────────────────
    function BoardView({ boardId }) {
      const [columns, setColumns] = useState([]);
      const [tasks, setTasks] = useState([]);
      const [loading, setLoading] = useState(true);

      const loadBoard = useCallback(async () => {
        setLoading(true);
        try {
          const [cols, tsks] = await Promise.all([
            api.get(`/api/boards/${boardId}/columns`),
            api.get(`/api/boards/${boardId}/tasks`),
          ]);
          setColumns(cols); setTasks(tsks);
        } catch (err) { console.error(err); }
        setLoading(false);
      }, [boardId]);

      useEffect(() => { loadBoard(); }, [loadBoard]);

      // WebSocket real-time updates (Agent 8)
      useWebSocket((msg) => {
        if (msg.type === 'task:created' && msg.payload?.boardId === boardId) {
          setTasks(prev => [...prev, msg.payload]);
        } else if (msg.type === 'task:updated' || msg.type === 'task:moved') {
          if (msg.payload?.boardId === boardId) {
            setTasks(prev => prev.map(t => t.id === msg.payload.id ? msg.payload : t));
          }
        } else if (msg.type === 'task:deleted' && msg.payload?.boardId === boardId) {
          setTasks(prev => prev.filter(t => t.id !== msg.payload.id));
        } else if (msg.type === 'column:created' && msg.payload?.boardId === boardId) {
          setColumns(prev => [...prev, msg.payload]);
        }
      });

      const handleTaskCreated = (task) => setTasks(prev => [...prev, task]);

      const handleTaskMoved = async (taskId, targetColumnId) => {
        // Optimistic update (Agent 6 pattern)
        setTasks(prev => prev.map(t => t.id === taskId ? { ...t, columnId: targetColumnId } : t));
        try {
          await api.patch(`/api/boards/${boardId}/tasks/${taskId}/move`, { columnId: targetColumnId, position: 0 });
        } catch {
          loadBoard(); // rollback on failure
        }
      };

      const handleTaskDeleted = async (taskId) => {
        setTasks(prev => prev.filter(t => t.id !== taskId));
        try { await api.del(`/api/boards/${boardId}/tasks/${taskId}`); } catch { loadBoard(); }
      };

      if (loading) return <div style={{flex:1,display:'flex',alignItems:'center',justifyContent:'center',color:'var(--text-muted)'}}>Loading board...</div>;

      return (
        <div className="board">
          {columns.map(col => (
            <Column
              key={col.id}
              column={col}
              tasks={tasks.filter(t => t.columnId === col.id).sort((a,b) => a.position - b.position)}
              boardId={boardId}
              onTaskCreated={handleTaskCreated}
              onTaskMoved={handleTaskMoved}
              onTaskDeleted={handleTaskDeleted}
            />
          ))}
        </div>
      );
    }

    // ─── New Board Modal ──────────────────────────────────────────────────
    function NewBoardModal({ onClose, onCreated }) {
      const [name, setName] = useState('');
      const [desc, setDesc] = useState('');
      const [busy, setBusy] = useState(false);

      const handleSubmit = async (e) => {
        e.preventDefault(); if (!name.trim()) return;
        setBusy(true);
        try {
          const board = await api.post('/api/boards', { name: name.trim(), description: desc });
          onCreated(board); onClose();
        } catch (err) { alert(err.message); }
        setBusy(false);
      };

      return (
        <div className="modal-overlay" onClick={onClose}>
          <form className="modal" onClick={e => e.stopPropagation()} onSubmit={handleSubmit}>
            <h3>New Board</h3>
            <div className="form-group">
              <label>Board Name</label>
              <input value={name} onChange={e => setName(e.target.value)} placeholder="e.g. Sprint 42" autoFocus required />
            </div>
            <div className="form-group">
              <label>Description (optional)</label>
              <textarea value={desc} onChange={e => setDesc(e.target.value)} rows={2} placeholder="What is this board for?" />
            </div>
            <div className="modal-actions">
              <button type="button" className="btn-ghost" onClick={onClose}>Cancel</button>
              <button type="submit" className="btn-primary" disabled={busy}>{busy ? 'Creating...' : 'Create Board'}</button>
            </div>
          </form>
        </div>
      );
    }

    // ─── Main App ─────────────────────────────────────────────────────────
    function App() {
      const { user, logout } = useContext(AuthContext);
      const [boards, setBoards] = useState([]);
      const [activeBoardId, setActiveBoardId] = useState(null);
      const [showNewBoard, setShowNewBoard] = useState(false);
      const [stats, setStats] = useState(null);

      useEffect(() => {
        if (!user) return;
        api.get('/api/boards').then(b => {
          setBoards(b);
          if (b.length > 0 && !activeBoardId) setActiveBoardId(b[0].id);
        });
      }, [user]);

      // Load stats for active board
      useEffect(() => {
        if (!activeBoardId) { setStats(null); return; }
        api.get(`/api/boards/${activeBoardId}/stats`).then(setStats).catch(() => setStats(null));
        const interval = setInterval(() => {
          api.get(`/api/boards/${activeBoardId}/stats`).then(setStats).catch(() => {});
        }, 15000);
        return () => clearInterval(interval);
      }, [activeBoardId]);

      const handleBoardCreated = (board) => {
        setBoards(prev => [board, ...prev]);
        setActiveBoardId(board.id);
      };

      const handleDeleteBoard = async (boardId, e) => {
        e.stopPropagation();
        if (!confirm('Delete this board and all its tasks?')) return;
        await api.del(`/api/boards/${boardId}`);
        setBoards(prev => prev.filter(b => b.id !== boardId));
        if (activeBoardId === boardId) setActiveBoardId(boards.find(b => b.id !== boardId)?.id || null);
      };

      if (!user) return <AuthPage />;

      return (
        <div className="app">
          <div className="header">
            <h1><span>Task</span>Flow</h1>
            <div className="header-actions">
              {stats && (
                <div className="stats-bar">
                  <div className="stat-item"><span>{stats.total}</span> tasks</div>
                  <div className="stat-item"><span>{stats.done}</span> done</div>
                  {stats.overdue > 0 && <div className="stat-item" style={{color:'var(--danger)'}}><span>{stats.overdue}</span> overdue</div>}
                  <div className="stat-item"><span>{stats.completionRate}%</span> complete</div>
                </div>
              )}
              <span style={{color:'var(--text-muted)',fontSize:'0.9rem'}}>Hi, {user.username}</span>
              <button className="btn-ghost btn-sm" onClick={logout}>Sign out</button>
            </div>
          </div>

          <div className="board-bar">
            {boards.map(b => (
              <div key={b.id} className={`board-tab${activeBoardId === b.id ? ' active' : ''}`} onClick={() => setActiveBoardId(b.id)}>
                {b.name}
                <span className="delete-board" onClick={(e) => handleDeleteBoard(b.id, e)}>&times;</span>
              </div>
            ))}
            <button className="btn-ghost btn-sm" onClick={() => setShowNewBoard(true)}>+ New Board</button>
          </div>

          {activeBoardId ? (
            <BoardView key={activeBoardId} boardId={activeBoardId} />
          ) : (
            <div className="empty-state">
              <p>Create your first board to get started</p>
              <button className="btn-primary" onClick={() => setShowNewBoard(true)}>+ New Board</button>
            </div>
          )}

          {showNewBoard && <NewBoardModal onClose={() => setShowNewBoard(false)} onCreated={handleBoardCreated} />}
        </div>
      );
    }

    // ─── Mount ────────────────────────────────────────────────────────────
    function Root() {
      return React.createElement(AuthProvider, null, React.createElement(App));
    }
    ReactDOM.createRoot(document.getElementById('root')).render(React.createElement(Root));
  </script>
</body>
</html>
